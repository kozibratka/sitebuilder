{"version":3,"file":"gridstack-dd-jqueryui.js","sourceRoot":"","sources":["../../src/jq/gridstack-dd-jqueryui.ts"],"names":[],"mappings":"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","sourcesContent":["// gridstack-dd-jqueryui.ts 2.0.0 @preserve\r\n\r\n/** JQuery UI Drag&Drop plugin\r\n * https://gridstackjs.com/\r\n * (c) 2014-2020 Alain Dumesny, Dylan Weiss, Pavel Reznikov\r\n * gridstack.js may be freely distributed under the MIT license.\r\n*/\r\n\r\nimport { GridStack, GridStackElement } from '../gridstack';\r\nimport { GridStackDD, DDOpts, DDKey, DDDropOpt, DDCallback, DDValue } from '../gridstack-dd';\r\nimport { GridItemHTMLElement, DDDragInOpt } from '../types';\r\n\r\n// TODO: TEMPORARY until can remove jquery-ui drag&drop and this class and use HTML5 instead !\r\n// see https://stackoverflow.com/questions/35345760/importing-jqueryui-with-typescript-and-requirejs\r\nimport * as $ from './jquery';\r\nexport { $ };\r\nexport * from './jquery-ui';\r\n\r\n/**\r\n * Jquery-ui based drag'n'drop plugin.\r\n */\r\nexport class GridStackDDJQueryUI extends GridStackDD {\r\n  public constructor(grid: GridStack) {\r\n    super(grid);\r\n  }\r\n\r\n  public resizable(el: GridItemHTMLElement, opts: DDOpts, key?: DDKey, value?: DDValue): GridStackDD {\r\n    let $el: JQuery = $(el);\r\n    if (opts === 'disable' || opts === 'enable') {\r\n      $el.resizable(opts);\r\n    } else if (opts === 'destroy') {\r\n      if ($el.data('ui-resizable')) { // error to call destroy if not there\r\n        $el.resizable(opts);\r\n      }\r\n    } else if (opts === 'option') {\r\n      $el.resizable(opts, key, value);\r\n    } else {\r\n      let handles = $el.data('gs-resize-handles') ? $el.data('gs-resize-handles') : this.grid.opts.resizable.handles;\r\n      $el.resizable({...this.grid.opts.resizable, ...{handles: handles}, ...{ // was using $.extend()\r\n        start: opts.start, // || function() {},\r\n        stop: opts.stop, // || function() {},\r\n        resize: opts.resize // || function() {}\r\n      }});\r\n    }\r\n    return this;\r\n  }\r\n\r\n  public draggable(el: GridItemHTMLElement, opts: DDOpts, key?: DDKey, value?: DDValue): GridStackDD {\r\n    let $el: JQuery = $(el);\r\n    if (opts === 'disable' || opts === 'enable') {\r\n      $el.draggable(opts);\r\n    } else if (opts === 'destroy') {\r\n      if ($el.data('ui-draggable')) { // error to call destroy if not there\r\n        $el.draggable(opts);\r\n      }\r\n    } else if (opts === 'option') {\r\n      $el.draggable(opts, key, value);\r\n    } else {\r\n      $el.draggable({...this.grid.opts.draggable, ...{ // was using $.extend()\r\n        containment: (this.grid.opts._isNested && !this.grid.opts.dragOut) ?\r\n          $(this.grid.el).parent() : (this.grid.opts.draggable.containment || null),\r\n        start: opts.start, // || function() {},\r\n        stop: opts.stop, // || function() {},\r\n        drag: opts.drag // || function() {}\r\n      }});\r\n    }\r\n    return this;\r\n  }\r\n\r\n  public dragIn(el: GridStackElement, opts: DDDragInOpt): GridStackDD {\r\n    let $el: JQuery = $(el as any); // workaround Type 'string' is not assignable to type 'PlainObject<any>' - see https://github.com/DefinitelyTyped/DefinitelyTyped/issues/29312\r\n    $el.draggable(opts);\r\n    return this;\r\n  }\r\n\r\n  public droppable(el: GridItemHTMLElement, opts: DDOpts | DDDropOpt, key?: DDKey, value?: DDValue): GridStackDD {\r\n    let $el: JQuery = $(el);\r\n    if (typeof opts.accept === 'function' && !opts._accept) {\r\n      // convert jquery event to generic element\r\n      opts._accept = opts.accept;\r\n      opts.accept = ($el: JQuery) => opts._accept($el.get(0));\r\n    }\r\n    $el.droppable(opts, key, value);\r\n    return this;\r\n  }\r\n\r\n  public isDroppable(el: GridItemHTMLElement): boolean {\r\n    let $el: JQuery = $(el);\r\n    return Boolean($el.data('ui-droppable'));\r\n  }\r\n\r\n  public isDraggable(el: GridStackElement): boolean {\r\n    let $el: JQuery = $(el as any); // workaround Type 'string' is not assignable to type 'PlainObject<any>' - see https://github.com/DefinitelyTyped/DefinitelyTyped/issues/29312\r\n    return Boolean($el.data('ui-draggable'));\r\n  }\r\n\r\n  public on(el: GridItemHTMLElement, name: string, callback: DDCallback): GridStackDD {\r\n    let $el: JQuery = $(el);\r\n    $el.on(name, (event, ui) => { callback(event as any, ui.draggable ? ui.draggable[0] : event.target, ui.helper ? ui.helper[0] : null) });\r\n    return this;\r\n  }\r\n\r\n  public off(el: GridItemHTMLElement, name: string): GridStackDD {\r\n    let $el: JQuery = $(el);\r\n    $el.off(name);\r\n    return this;\r\n  }\r\n}\r\n\r\n// finally register ourself\r\nGridStackDD.registerPlugin(GridStackDDJQueryUI);\r\n"]}